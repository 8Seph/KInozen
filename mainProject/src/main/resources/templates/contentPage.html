<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml" lang="RU">

<head th:replace="blocks/header2.html :: head"></head>
<body>
<div th:replace="blocks/header2.html:: header"></div>

<div class="container">
    <!-- Content начало-->
    <div class="card bg-transparent text-white mt-4 shadow">
        <div class="img-black rounded overflow-hidden">
            <img th:src="@{'/image/content/' + ${content.imageName}}" class="image-normalize" style="height: 500px;">
        </div>
        <div class="card-img-overlay" style="z-index: 3">
            <!-- todo breadcrumb  начало-->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-transparent">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item"><a href="#">Library</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Data</li>
                </ol>
            </nav>
            <!-- todo breadcrumb конец-->

            <!-- загаловок начало-->
            <div>
                <h1 class="card-title text-white display-4" th:text="${content.name}"></h1>
                <!-- номер сезона и серии начало-->
                <div th:if="${content.type.ordinal() == 0}">
                    <span class="badge badge-light" th:if="${currentEpisode !=null}"
                          th:text="'Cезон ' + ${currentSeason.numberSeason} + ' | ' + 'Эпизод '+ ${currentEpisode.numberEpisode} + '' "></span>
                </div>
                <!-- номер сезона и серии конец-->
            </div>
            <!-- загаловок конец-->


            <!-- Жанры начало-->
            <div class="">
                <span class="text-white-50">Жанры:</span>
                <span th:each="g : ${content.genres}"
                      th:text="${g.name} + ' '"></span>
            </div>
            <!-- Жанры конец-->

            <!-- дата выхода начало-->
            <div class="">
                <span class="text-white-50">Дата выхода:</span>
                <span th:text="${content.released.toLocaleString()}"></span>
            </div>
            <!-- дата выхода конец-->

            <!-- directors начало-->
            <div class="">
                <span class="text-white-50">Режисер:</span>
                <span itemprop="director" th:each="d : ${content.directors}"
                      th:text="${d.firstName} + ' ' + ${d.lastName}"></span>
            </div>
            <!-- directors конец-->

            <!-- actors начало-->
            <div class="">
                <span class="text-white-50">В ролях:</span>
                <span itemprop="actor" th:each="a : ${content.actors}"
                      th:text="${a.firstName} + ' ' + ${a.lastName} + ' '"></span>
            </div>
            <!-- actors конец-->

            <!-- description начало -->
            <p class="card-text text-white-50" th:text="${content.description}"></p>
            <!-- description конец-->

            <!-- seasons начало -->
            <div th:if="${content.type.ordinal() == 0}" class="text-white mb-1">Сезоны:</div>
            <div class="btn-group" role="group" aria-label="Basic example">
                <a type="button" class="btn btn-outline-warning" th:each="s, iterator : ${seasons}"
                   th:href="@{'/content/' + ${content.url} + '/' + ${s.url}}" th:text="${s.numberSeason}"></a>
            </div>
            <!-- seasons конец -->

            <!-- episodes начало -->
            <div class="mt-2 " th:if="${episodes != null}">
                <div class="text-white mb-1">Эпизод:</div>
                <div class="dropdown d-inline">
                    <a class="btn btn-outline-warning btn-sm dropdown-toggle"
                       th:text="${currentEpisode.numberEpisode} + '. ' +  ${currentEpisode.name}" href="#" role="button"
                       id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                        <a class="dropdown-item" th:if="${currentEpisode != null}"
                           th:each="e : ${episodes}"
                           th:text="${e.numberEpisode} + '. ' +  ${e.name}"
                           th:href="@{'season-' + ${currentSeason.numberSeason} + '?episode=' + ${e.numberEpisode}}">

                        </a>

                    </div>
                </div>
            </div>
            <!-- episodes конец -->

            <!-- isWished начало -->
            <div class="" sec:authorize="isAuthenticated()">
                <div th:unless="${episodes != null}">
                    <!--/*@thymesVar id="isWished" type="java.lang.Boolean"*/-->
                    <div th:if="${isWished}">
                        <a th:href="@{'/profile/wishlist/delete/' + ${content.id}}"
                           class="btn btn-outline-warning float-right">Запланировано</a>
                    </div>
                    <div th:unless="${isWished}">
                        <a th:href="@{'/profile/wishlist/add/' + ${content.id}}" class="btn btn-warning float-right">Смотреть
                            позже</a>
                    </div>
                </div>
            </div>
            <!-- isWished конец -->
        </div>
    </div>


    <!-- блок кино начало -->
    <div class="mt-4" th:if="${content.type.ordinal() == 1}">
        <p>
            <button class="btn btn btn-outline-light mr-4" type="button" data-toggle="collapse"
                    data-target="#move-trailer"
                    aria-expanded="false" aria-controls="collapseExample">
                Трейлер
            </button>
            <button class="btn btn btn-outline-light mr-4" type="button" data-toggle="collapse"
                    data-target="#move-watch"
                    aria-expanded="false" aria-controls="collapseExample">
                Фильм
            </button>
        </p>

        <div class="collapse" id="move-trailer">
            <div class="">
                <!-- трейлер начало -->
                <div class="mt-3">
                    <iframe width="100%" height="440" src="https://www.youtube.com/embed/g8evyE9TuYk"
                            frameborder="0"
                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen></iframe>
                </div>
                <!-- трейлер конец -->
            </div>
        </div>

        <div class="collapse" id="move-watch">
            <div class="">
                <!-- playerzen начало -->
                <div th:if="${idEntity != null}">
                    <div class="mt-3">
                        <video controls width="100%" height="440">
                            <source th:src="@{/player/video/{id}(id=${idEntity})}"
                                    type="video/mp4">
                        </video>
                    </div>
                </div>
                <!-- playerzen конец -->
            </div>
        </div>
    </div>
    <!-- блок кино конец -->

    <!-- блок просмотра сериала начало -->
    <div th:if="${content.type.ordinal() == 0}">
        <!-- трейлер начало -->
        <div class="mt-4" th:unless="${idEntity != null}">
            <iframe width="100%" height="440" src="https://www.youtube.com/embed/g8evyE9TuYk"
                    frameborder="0"
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
        </div>
        <!-- трейлер конец -->


        <!-- playerzen начало -->
        <div th:if="${idEntity != null}">
            <div class="mt-4">
                <video controls width="100%" height="440">
                    <source th:src="@{/player/video/{id}(id=${idEntity})}"
                            type="video/mp4">
                </video>
            </div>
        </div>
        <!-- playerzen конец -->
    </div>
    <!-- блок просмотра сериала конец -->

</div>
<!-- Content конец-->
<footer th:replace="blocks/footer2.html :: footer"></footer>
</body>
</html>